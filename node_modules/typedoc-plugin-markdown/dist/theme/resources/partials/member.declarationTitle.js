"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.declarationTitle = void 0;
const markdown_1 = require("../../../libs/markdown");
const utils_1 = require("../../../libs/utils");
/**
 * Remders a declaration title.
 *
 * @category Member Partials
 */
function declarationTitle(model) {
    const md = [];
    const useCodeBlocks = this.options.getValue('useCodeBlocks');
    const declarationType = this.helpers.getDeclarationType(model);
    const prefix = [];
    if (model.flags.length) {
        prefix.push(model.flags?.map((flag) => (0, markdown_1.backTicks)(flag.toLowerCase())).join(' '));
    }
    if (model.flags.isRest) {
        prefix.push('...');
    }
    const keyword = this.helpers.getKeyword(model.kind);
    if (useCodeBlocks && keyword) {
        prefix.push(keyword);
    }
    if (prefix.length) {
        md.push(prefix.join(' ') + ' ');
    }
    const name = [];
    if (model.getSignature) {
        name.push((0, markdown_1.backTicks)('get') + ' ');
    }
    if (model.setSignature) {
        name.push((0, markdown_1.backTicks)('set') + ' ');
    }
    const nameParts = model.name.split('.');
    const declarationName = model.escapedName?.includes('.')
        ? model.name
        : nameParts[nameParts.length - 1];
    name.push(/[\\`]/.test(declarationName)
        ? (0, utils_1.escapeChars)(declarationName)
        : (0, markdown_1.bold)((0, utils_1.escapeChars)(declarationName)));
    if (model.typeParameters) {
        name.push(`\\<${model.typeParameters
            ?.map((typeParameter) => (0, markdown_1.backTicks)(typeParameter.name))
            .join(', ')}\\>`);
    }
    if (declarationType) {
        name.push(': ');
    }
    md.push(name.join(''));
    if (declarationType) {
        md.push(this.partials.someType(declarationType));
    }
    if (model.defaultValue &&
        model.defaultValue !== '...' &&
        model.defaultValue !== model.name) {
        md.push(` = \`${(0, utils_1.stripComments)(model.defaultValue)}\``);
    }
    if (useCodeBlocks) {
        md.push(';');
    }
    const result = md.join('');
    return useCodeBlocks ? (0, markdown_1.codeBlock)(result) : `> ${result}`;
}
exports.declarationTitle = declarationTitle;
